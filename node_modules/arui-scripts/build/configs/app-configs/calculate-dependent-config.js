"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateDependentConfig = void 0;
const path_1 = __importDefault(require("path"));
const lodash_merge_1 = __importDefault(require("lodash.merge"));
const get_polyfills_1 = require("../util/get-polyfills");
/**
 * Обновление ключей конфига, зависящих от других. Это нужно делать в самый последний момент
 */
function calculateDependentConfig(config) {
    return lodash_merge_1.default(config, {
        publicPath: `${config.assetsPath}/`,
        serverOutputPath: path_1.default.resolve(config.cwd, config.buildPath),
        clientOutputPath: path_1.default.resolve(config.cwd, config.buildPath, config.assetsPath),
        clientPolyfillsEntry: get_polyfills_1.getPolyfills(config),
    });
}
exports.calculateDependentConfig = calculateDependentConfig;
